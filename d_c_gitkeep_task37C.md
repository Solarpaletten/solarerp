–û—Ç–ª–∏—á–Ω–æ. –ó–∞–∫—Ä—ã–≤–∞–µ–º 37 –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ.

–ù–∏–∂–µ ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ, –∂—ë—Å—Ç–∫–æ–µ –¢–ó –¥–ª—è Claude –Ω–∞ **Task 37C**.
–ë–µ–∑ –ª–∏—à–Ω–µ–≥–æ UI-—à—É–º–∞. –¢–æ–ª—å–∫–æ –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∞—è –ª–æ–≥–∏–∫–∞.

---

# üìò TASK 37C ‚Äî Purchase Totals Summary (Read-Only ERP Block)

## üéØ –¶–µ–ª—å

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏—Ç–æ–≥–æ–≤—ã–π –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–π –±–ª–æ–∫ –¥–ª—è Purchase Document:

```
/company/[companyId]/purchases/[purchaseId]
```

–≠—Ç–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ 37:

* 37A ‚Äî Header ‚úÖ
* 37B ‚Äî Items table ‚úÖ
* 37C ‚Äî Totals summary ‚¨Ö —Å–µ–π—á–∞—Å

---

# üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:

```
components/purchases/PurchaseTotals.tsx
```

–ü–æ–¥–∫–ª—é—á–∏—Ç—å –≤:

```
PurchaseDocumentPage
```

–ü–æ–¥ Items Table.

---

# üì¶ Props

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç:

```ts
interface PurchaseTotalsProps {
  items: {
    quantity: string | number;
    priceWithoutVat: string | number;
    vatRate: string | number | null;
  }[];
  currencyCode: string;
}
```

---

# üßÆ –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–∞

## 1Ô∏è‚É£ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è

```ts
function num(v): number
```

* null ‚Üí 0
* undefined ‚Üí 0
* NaN ‚Üí 0

---

## 2Ô∏è‚É£ –ü–æ –∫–∞–∂–¥–æ–º—É item

```
net = qty * price
vat = net * (vatRate / 100)
gross = net + vat
```

–ï—Å–ª–∏ vatRate null ‚Üí —Å—á–∏—Ç–∞—Ç—å 0%.

---

## 3Ô∏è‚É£ –û–±—â–∏–µ —Å—É–º–º—ã

```
totalNet   = sum(net)
totalVat   = sum(vat)
totalGross = sum(gross)
```

---

## 4Ô∏è‚É£ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ VAT

–°–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ vatRate:

```
{
  "19": { netSum, vatSum },
  "7":  { netSum, vatSum },
  "0":  { netSum, vatSum }
}
```

* vatRate null ‚Üí 0
* –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ —Å—Ç—Ä–æ–∫—É
* —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å—Ç–∞–≤–æ–∫ –ø–æ —É–±—ã–≤–∞–Ω–∏—é

---

# üñ• UI ‚Äî –ë—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–π —Å—Ç–∏–ª—å

## –û–±—â–∞—è –æ–±—ë—Ä—Ç–∫–∞

* bg-white
* border
* rounded-lg
* px-5 py-5
* max-w-md
* ml-auto (—Å–ø—Ä–∞–≤–∞ –Ω–∞ desktop)
* w-full –Ω–∞ mobile

---

# üìê Layout —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

–í–Ω—É—Ç—Ä–∏ ‚Äî –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫:

```
Net Total
VAT 19%
VAT 7%
Total VAT
-------------------
Grand Total
```

---

# üßæ –§–æ—Ä–º–∞—Ç —Å—Ç—Ä–æ–∫–∏

–ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞:

```
Label                 ‚Ç¨ 1.234,00
```

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏:

* flex
* justify-between
* text-xs
* tabular-nums
* font-mono –¥–ª—è —á–∏—Å–µ–ª
* 2 decimals
* toLocaleString('de-DE')

---

# üé® –°—Ç–∏–ª—å —Å—Ç—Ä–æ–∫

### –û–±—ã—á–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏

* text-gray-600

### Total VAT

* border-t
* pt-2
* text-gray-800

### Grand Total

* mt-2
* pt-2
* border-t-2
* font-bold
* text-gray-900

---

# üí± –í–∞–ª—é—Ç–∞

–í—ã–≤–æ–¥:

```
EUR 1.234,00
```

–ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–º–≤–æ–ª ‚Ç¨, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å currencyCode.

---

# üì± Responsive

Desktop:

* –±–ª–æ–∫ —Å–ø—Ä–∞–≤–∞ (ml-auto)

Mobile:

* –±–ª–æ–∫ full width

---

# üß™ Acceptance Criteria

* –ù–µ—Ç NaN
* –ù–µ—Ç undefined
* –ù–µ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
* –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ 0 items
* –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ 1 item
* –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö VAT —Å—Ç–∞–≤–∫–∞—Ö
* –ß–∏—Å–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–∫—Ä—É–≥–ª–µ–Ω—ã
* Sticky scroll –Ω–µ –ª–æ–º–∞–µ—Ç—Å—è
* –ù–µ—Ç console –æ—à–∏–±–æ–∫

---

# ‚ùó –ù–µ –¥–µ–ª–∞—Ç—å

* –ù–µ –¥–µ–ª–∞—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
* –ù–µ –¥–µ–ª–∞—Ç—å discount
* –ù–µ –¥–µ–ª–∞—Ç—å rounding
* –ù–µ –¥–µ–ª–∞—Ç—å –≤–∞–ª—é—Ç–Ω—É—é –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é
* –ù–µ –¥–µ–ª–∞—Ç—å journal entries
* –ù–µ –¥–µ–ª–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

---

# üéØ –§–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–ª—å Task 37

–ü–æ—Å–ª–µ 37C —Å—Ç—Ä–∞–Ω–∏—Ü–∞ Purchase:

‚úî Header
‚úî Items
‚úî Totals

= –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π Read-Only ERP –¥–æ–∫—É–º–µ–Ω—Ç.

---

–ü–µ—Ä–µ–¥–∞–π Claude.

–ö–æ–≥–¥–∞ –±—É–¥–µ—Ç –∫–æ–¥ ‚Äî –¥–µ–ª–∞–µ–º —Å—Ç—Ä–æ–≥–∏–π —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∞—É–¥–∏—Ç 37.
