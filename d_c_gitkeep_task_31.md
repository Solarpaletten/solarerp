ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾. Ð¤Ð¾Ñ€Ð¼Ð¸Ñ€ÑƒÐµÐ¼ Ð¶Ñ‘ÑÑ‚ÐºÐ¾Ðµ Ð¸Ð½Ð¶ÐµÐ½ÐµÑ€Ð½Ð¾Ðµ Ð¢Ð—.

---

# D=>C

## Task 31 â€” Accounting Mapping Layer (SKR03 Abstraction)

---

## ðŸŽ¯ Ð¦ÐµÐ»ÑŒ

ÐŸÐ¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ ÑƒÐ±Ñ€Ð°Ñ‚ÑŒ Ñ…Ð°Ñ€Ð´ÐºÐ¾Ð´ Ð½Ð¾Ð¼ÐµÑ€Ð¾Ð² ÑÑ‡ÐµÑ‚Ð¾Ð² Ð¸Ð·:

* journalService
* repostingService
* future Air Engine

Ð’ÑÐµ Ð¿Ñ€Ð¾Ð²Ð¾Ð´ÐºÐ¸ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð¸Ð´Ñ‚Ð¸ Ñ‡ÐµÑ€ÐµÐ· ÐµÐ´Ð¸Ð½Ñ‹Ð¹ mapping-ÑÐ»Ð¾Ð¹.

---

## ðŸ“‚ Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»

```
lib/accounting/accountMapping.ts
```

---

## ðŸ“ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° (ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ñ‚Ð¸Ð¿Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ)

```ts
export type VatMode = "VAT_19" | "VAT_7" | "EXPORT"

export const ACCOUNT_MAP = {
  bank: "1010",
  cash: "1000",
  receivable: "1200",
  payable: "1600",

  sales: {
    VAT_19: {
      revenue: "8400",
      vat: "1776"
    },
    VAT_7: {
      revenue: "8300",
      vat: "1771"
    },
    EXPORT: {
      revenue: "8125"
    }
  },

  purchase: {
    VAT_19: {
      expense: "3400",
      vat: "1406"
    },
    VAT_7: {
      expense: "3100",
      vat: "1401"
    }
  }
} as const
```

---

## ðŸ” Ð ÐµÑ„Ð°ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð³

Ð’ `journalService.ts`:

âŒ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð»ÑŽÐ±Ñ‹Ðµ:

```
"8400"
"1776"
"1406"
```

Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ðµ literal codes.

âœ… Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾:

```
ACCOUNT_MAP.sales[vatMode].revenue
ACCOUNT_MAP.sales[vatMode].vat
ACCOUNT_MAP.purchase[vatMode].expense
ACCOUNT_MAP.purchase[vatMode].vat
```

---

## ðŸ§  Ð›Ð¾Ð³Ð¸ÐºÐ°

### ÐŸÑ€Ð¾Ð´Ð°Ð¶Ð° 19%

Debit:

* receivable

Credit:

* revenue
* vat

### ÐŸÐ¾ÐºÑƒÐ¿ÐºÐ° 19%

Debit:

* expense
* vat

Credit:

* payable

---

## ðŸš« Ð—Ð°Ð¿Ñ€ÐµÑ‰ÐµÐ½Ð¾

* ÐÐ¸ÐºÐ°ÐºÐ¸Ñ… Ð½Ð¾Ð²Ñ‹Ñ… Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¹
* ÐÐ¸ÐºÐ°ÐºÐ¸Ñ… Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Prisma schema
* ÐÐ¸ÐºÐ°ÐºÐ¸Ñ… Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹ JournalLine
* ÐÐ¸ÐºÐ°ÐºÐ¸Ñ… UI Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹

---

## âœ… ÐšÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸ Done

1. journalService Ð½Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð½Ð¸ Ð¾Ð´Ð½Ð¾Ð³Ð¾ string-ÐºÐ¾Ð´Ð° ÑÑ‡ÐµÑ‚Ð°
2. Ð’ÑÐµ Ð¿Ñ€Ð¾Ð²Ð¾Ð´ÐºÐ¸ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚ Ñ‡ÐµÑ€ÐµÐ· ACCOUNT_MAP
3. Trial Balance Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÐµÑ‚ ÑÑ…Ð¾Ð´Ð¸Ñ‚ÑŒÑÑ
4. TypeScript Ð±ÐµÐ· Ð¾ÑˆÐ¸Ð±Ð¾Ðº
5. ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð½Ñ‹Ð¹ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚ SKR03 Ð½Ðµ Ð»Ð¾Ð¼Ð°ÐµÑ‚ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ

---

## ðŸ“¦ ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚

Ð¤Ð°Ð¹Ð»Ñ‹:

* accountMapping.ts (Ð½Ð¾Ð²Ñ‹Ð¹)
* journalService.ts (Ñ€ÐµÑ„Ð°ÐºÑ‚Ð¾Ñ€)
* repostingService.ts (ÐµÑÐ»Ð¸ Ð·Ð°Ñ‚Ñ€Ð¾Ð½ÑƒÑ‚)

ÐšÑ€Ð°Ñ‚ÐºÐ¸Ð¹ Ð¾Ñ‚Ñ‡ÐµÑ‚:

* ÐºÐ°ÐºÐ¸Ðµ literal ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹
* ÑÐºÐ¾Ð»ÑŒÐºÐ¾ ÑÑ‚Ñ€Ð¾Ðº Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¾
* Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ð¿Ñ€Ð¾Ð²Ð¾Ð´ÐºÐ¸ Ð¿Ð¾ÑÐ»Ðµ Ñ€ÐµÑ„Ð°ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°

---

ÐŸÐ¾ÑÐ»Ðµ Task 31 â€” ÑÐ¸ÑÑ‚ÐµÐ¼Ð° ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑÑ Ñ€Ð°ÑÑˆÐ¸Ñ€ÑÐµÐ¼Ð¾Ð¹.

Ð­Ñ‚Ð¾ Ñ„ÑƒÐ½Ð´Ð°Ð¼ÐµÐ½Ñ‚ Ð´Ð»Ñ Air Engine.

---

C=>D â€” Ð¾Ð¶Ð¸Ð´Ð°ÑŽ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸ÑŽ.
